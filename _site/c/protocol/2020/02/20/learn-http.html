<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>HTTP</title>
	
	<meta name="author" content="JY">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/liujingyu">
				<i class="fa fa-github"></i>
			</a>
			
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:jingyu525@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
                <img src="/assets/media/dragon.jpeg" class="img-circle" />
				JY
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="background: url(/assets/media/sky.png) no-repeat !important;">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
        <img src="/assets/media/dragon.jpeg" class="img-circle"  height="150" width="150" />
	</a>
	<h3 class="title">
        <a href="/">JY</a>
    </h3>
</header>


<div id="bio" class="text-center">
	目前就职于小猪短租
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/liujingyu">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:jingyu525@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
	<ul class="list-unstyled list-inline">
		<li>
            <a class="btn btn-default btn-sm" href="/about">
                关于
			</a>
		</li>
		<li>
            <a class="btn btn-default btn-sm" href="/elasticsearch">
                elasticsearch
			</a>
		</li>
		<li>
            <a class="btn btn-default btn-sm" href="/open-source">
                开源项目
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>HTTP </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	   
	   February 
	   20th,
	   
	   2020
	 </span>
	  <div class="article_body">
	  <h2 id="http是什么">HTTP是什么</h2>

<p>HTTP是Hypertext Transfer Protocol 的缩写，超文本传输协议</p>

<h2 id="为什么学习http">为什么学习HTTP</h2>

<p>网络应用程序，分为前端和后端两个部分。当前的发展趋势，就是前端设备层出不穷（手机、平板、桌面电脑、其他专用设备……）。RESTful API是目前比较成熟的一套互联网应用程序的API设计理论, 底层协议正是使用的Http协议。做为后端开发的同学，有必要了解底层的HTTP协议内容及实现逻辑，有利于我们清楚整个具体过程到底发生了什么。</p>

<h2 id="如何学习http">如何学习HTTP</h2>

<h3 id="client--server-交互场景">client &amp; server 交互场景</h3>

<p><img src="/assets/media/20180826161800456.png" alt="client&amp;server" /></p>

<h3 id="http-报文结构">HTTP 报文结构</h3>

<p><img src="/assets/media/20180826205639881.png" alt="http message structure" /></p>

<p><img src="/assets/media/20180826154938556.png" alt="request example" /></p>

<p><img src="/assets/media/20180826155011558.png" alt="response example" /></p>

<h3 id="经典开源的http-server项目">经典开源的HTTP Server项目</h3>

<ul>
  <li>
    <p><a href="https://github.com/EZLippi/Tinyhttpd">源码Tinyhttpd</a></p>
  </li>
  <li>
    <p><img src="/assets/media/20160413230616951.png" alt="流程图" /></p>
  </li>
  <li>
    <p>阅读代码顺序 <code class="highlighter-rouge">main -&gt; startup -&gt; accept_request -&gt; execute_cgi</code></p>
  </li>
  <li>每个函数作用
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>accept_request:  处理从套接字上监听到的一个 HTTP 请求，在这里可以很大一部分地体现服务器处理请求流程。
bad_request: 返回给客户端这是个错误请求，HTTP 状态吗 400 BAD REQUEST.
cat: 读取服务器上某个文件写到 socket 套接字。
cannot_execute: 主要处理发生在执行 cgi 程序时出现的错误。
error_die: 把错误信息写到 perror 并退出。
execute_cgi: 运行 cgi 程序的处理，也是个主要函数。
get_line: 读取套接字的一行，把回车换行等情况都统一为换行符结束。
headers: 把 HTTP 响应的头部写到套接字。
not_found: 主要处理找不到请求的文件时的情况。
sever_file: 调用 cat 把服务器文件返回给浏览器。
startup: 初始化 httpd 服务，包括建立套接字，绑定端口，进行监听等。
unimplemented: 返回给浏览器表明收到的 HTTP 请求所用的 method 不被支持。
</code></pre></div>    </div>
  </li>
  <li>cgi页面请求响应处理的核心函数—— <code class="highlighter-rouge">execute_cgi()</code></li>
</ul>

<p><img src="/assets/media/2018050721251980.png" alt="Pipe state" /></p>

<ul>
  <li>
    <p>Docker C 环境, 调试PHP源码用的Docker环境, 大家可以试试 <a href="https://github.com/liujingyu/docker-debug-php-src">docker-debug-php-src</a></p>
  </li>
  <li>
    <p><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/gdb.html">GDB 工具参考</a></p>
  </li>
  <li>
    <p><a href="http://www.ruanyifeng.com/blog/2015/02/make.html">Make 命令教程</a></p>
  </li>
</ul>

<h2 id="参考链接">参考链接</h2>
<ul>
  <li><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html">RESTful API 设计指南</a></li>
  <li><a href="http://www.ruanyifeng.com/blog/2011/09/restful.html">理解RESTful架构</a></li>
  <li><a href="https://blog.csdn.net/u013644957/article/details/51147723">Tinyhttpd for Ubuntu 14.04 中文详细注释版</a></li>
  <li><a href="https://blog.csdn.net/thisinnocence/article/details/82081887">HTTP1.1 基础: 请求和响应的消息交互细节</a></li>
  <li><a href="https://datatracker.ietf.org/doc/rfc2616/">RFC文档</a>
    <ul>
      <li>摘要</li>
      <li>The Hypertext Transfer Protocol (HTTP) is an application-level
 protocol for distributed, collaborative, hypermedia information
 systems. It is a generic, stateless, protocol which can be used for
 many tasks beyond its use for hypertext, such as name servers and
 distributed object management systems, through extension of its
 request methods, error codes and headers [47]. A feature of HTTP is
 the typing and negotiation of data representation, allowing systems
 to be built independently of the data being transferred.</li>
    </ul>

    <p>HTTP has been in use by the World-Wide Web global information
 initiative since 1990. This specification defines the protocol
 referred to as “HTTP/1.1”, and is an update to RFC 2068 [33].</p>
  </li>
</ul>


	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#C-ref">
					C <span>(2)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#Protocol-ref">
					Protocol <span>(1)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#c-ref">
					c <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#protocol-ref">
					protocol <span>(1)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=HTTP"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
        <img src="/assets/media/dragon.jpeg" class="img-rounded author-image" width="100" height="100" />
        <h4 class="section-title author-name">JY</h4>
        <p class="author-bio">目前就职于小猪短租</p>
      </section>
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous"><a href="/c/2020/02/10/c-demo.html" title="C 语言 Demo示例学习">&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/linux/load/2020/02/24/high-machine-load.html" title="机器高负载排查">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>





		<footer>
			<hr/>
			<p>
				&copy; 2020 JY with <a href="http://jekyllrb.com/">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



